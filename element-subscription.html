<!doctype html><html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<link href="css/main.css" rel="stylesheet" type="text/css" />
		<title>Circuit subscription element</title>
		<link href='http://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
	</head>
	<body>
	
	<div class="header">
	<a href="http://gocircuit.org">Circuit</a> Self-managed infrastructure, programmatic monitoring and orchestration
	</div>
	<div class="page">
	

<h2>Example: Listen on server join and leave announcements</h2>

<p>The circuit provides two special element types <code>@join</code> and <code>@leave</code>, 
called <em>subscriptions</em>. Their job is to notify you when new
circuit servers join the systems or others leave it.
Both of them behave like receive-only channels.

<pre>
	circuit mk@join /X88550014d4c82e4d/watch/join
	circuit mk@leave /X88550014d4c82e4d/watch/leave
</pre>

<p>The join subscription delivers a new message each time a cicruit server joins
the system. The received message holds the anchor path of the new server.

<pre>
	circuit recv /X88550014d4c82e4d/watch/join
</pre>

<p>Similarly, the leave subscription delivers a new message each time
a circuit server disappears from the system.

<pre>
	circuit peek /X88550014d4c82e4d/watch/join
</pre>

        
	</div>
	
	<div class="footer">
	The <a href="http://escher.io">Escher</a> and <a href="http://gocircuit.org">Circuit</a> projects are
	partially supported by the 
	<a href="http://www.darpa.mil/Our_Work/I2O/Programs/XDATA.aspx">DARPA XData Initiative</a>.<br>
	Sponsors and partners are welcome and appreciated. Contact <a href="mailto:p@gocircuit.org">Petar Maymounkov</a> for details.
	</div>
	</body>
	</html>